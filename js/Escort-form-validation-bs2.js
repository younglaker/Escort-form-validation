// Generated by CoffeeScript 1.6.3
(function($) {
  $.fn.EscortForm = function(options) {
    var form, opts, selector;
    opts = $.extend({}, $.fn.EscortForm.options, options);
    selector = "input, textarea, select";
    form = this;
    form.find(selector).parent().append("<span class='help-inline tip-red es-tips'>aaa</span>");
    return form.submit(function() {
      var qualified, reg_email;
      qualified = true;
      reg_email = /^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/;
      form.find(selector).each(function() {
        if ($(this).attr("esRequired") === "true") {
          if (this.value === "") {
            qualified = false;
            return $(this).parent().find(".es-tips").html(opts.tip_required);
          } else {
            return $(this).parent().find(".es-tips").html("");
          }
        }
      });
      console.log("2" + qualified);
      if (qualified !== true) {
        return false;
      }
      form.find(selector).each(function() {
        if ($(this).attr("esMax")) {
          if (this.value > $(this).attr("esMax")) {
            qualified = false;
            return $(this).parent().find(".es-tips").html(opts.tip_max + $(this).attr("esMax"));
          } else {
            return $(this).parent().find(".es-tips").html("");
          }
        }
      });
      console.log("3" + qualified);
      if (qualified !== true) {
        return false;
      }
      form.find(selector).each(function() {
        if ($(this).attr("esMin")) {
          if (this.value < $(this).attr("esMin")) {
            qualified = false;
            return $(this).parent().find(".es-tips").html(opts.tip_min + $(this).attr("esMin"));
          } else {
            return $(this).parent().find(".es-tips").html("");
          }
        }
      });
      if (qualified !== true) {
        return false;
      }
      form.find(selector).each(function() {
        var mail;
        if ($(this).attr("esEmail") === "true") {
          mail = reg_email.test(this.value);
          if (!mail) {
            qualified = false;
            return $(this).parent().find(".es-tips").html(opts.tip_email);
          } else {
            return $(this).parent().find(".es-tips").html("");
          }
        }
      });
      if (qualified !== true) {
        return false;
      }
    });
  };
  return $.fn.EscortForm.options = {
    tip_required: "Required here",
    tip_max: "Can't lager than ",
    tip_min: "Can't smaller than ",
    tip_email: "Please enter correct email"
  };
})(jQuery);
